<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Document</title>
	<script type="text/javascript">
	/********************************/
	//P230
	/********************************/
	//定义Animal类
	// function Animal(name){
	// 	//共有属性
	// 	this.name = name || "zhitian";
	// 	this.type = "animal";
	// 	//私有属性
	// 	var age = 20;
	// 	//私有方法
	// 	var move = function(){
	// 		alert("I'm moving now.");
	// 	}
	// };
	// Animal.prototype = {
	// 	//共有方法
	// 	say: function(){
	// 		alert("I'm a " + this.type + ", my name is " + this.name + "I'm" + age);
	// 	},
	// 	act: function(){
	// 		move();
	// 	}
	// };
	// var myDog = new Animal("wangcai");
	// myDog.say();	//age is undefined;
	// myDog.act();	//move() is undefined;
	

	/********************************/
	//P231
	/********************************/
	//定义Animal类
	// function Animal(name){
	// 	//共有属性
	// 	this.name = name || "lenovo";
	// 	this.type = "animal";
	// 	//私有属性
	// 	this._age = 20;
	// };
	// Animal.prototype = {
	// 	//私有方法
	// 	_move : function(){
	// 		alert("I'm moving now!");
	// 	},
	// 	//共有方法
	// 	say : function(){
	// 		alert("I'm a " + this.type + ", my name is " + this.name + ", I'm " + this._age);
	// 	},
	// 	act : function(){
	// 		this._move();
	// 	}
	// };
	// var myDog = new Animal("wangcai");
	// myDog.say();
	// myDog.act();
	// myDog._move();
	// alert(myDog._age);

	
	/********************************/
	//P232
	/********************************/
	// function Animal(name){
	// 	var name; //诡异的变量，变量名与参数名同名，但内部定义的变量如果没有给它赋值，该变量名所对应的值仍是参数传的值;
	// 	var type = "animal";
	// 	var _age = 20;
	// 	this.getName = function(){
	// 		return name;
	// 	};
	// 	this.setName = function(o){
	// 		name = o;
	// 	};
	// 	this.getType = function(){
	// 		return type;
	// 	};
	// 	this.setType = function(o){
	// 		type = o;
	// 	};
	// 	this._getAge = function(){
	// 		return _age;
	// 	};
	// 	this._setAge = function(o){
	// 		_age = o;
	// 	};
	// 	console.log(name);
	// 	this.setName(name);
	// };
	// Animal.prototype = {
	// 	_move : function(){
	// 		alert("I'm moving now!");
	// 	},
	// 	say : function(){
	// 		alert("I'm a " + this.getType() + ",my name is " + this.getName() + ", I'm " + this._getAge());
	// 	},
	// 	act : function(){
	// 		this._move();
	// 	}
	// };

	// //实例化
	// var myDog = new Animal("wangcai");
	// myDog.say();
	// myDog.setType("Dog");
	// alert(myDog.getType());
	// // myDog.setName("lili");
	// alert(myDog.getName());


	/********************************/
	//P233
	/********************************/
	// function Animal(name){
	// 	var name; //诡异的变量，变量名与参数名同名，但内部定义的变量如果没有给它赋值，该变量名所对应的值仍是参数传的值，等同于 var name = name;
	// 	var type = "animal";
	// 	var _age = 20;
	// 	this.getName = function(){
	// 		return name;
	// 	};
	// 	this.setName = function(o){
	// 		if( o != "wangcai" && o != "xiaoqiang"){
	// 			alert("您设置的name值不合要求");
	// 			return;
	// 		};
	// 		name = o;
	// 	};
	// 	this.getType = function(){
	// 		return type;
	// 	};
	// 	this.setType = function(o){
	// 		alert("赋值失败，Animal类的type属性是只读属性");
	// 	};
	// 	this._getAge = function(){
	// 		return _age;
	// 	};
	// 	this._setAge = function(o){
	// 		_age = o;
	// 	};
	// 	console.log(name);
	// 	this.setName(name);
	// };
	// Animal.prototype = {
	// 	_move : function(){
	// 		alert("I'm moving now!");
	// 	},
	// 	say : function(){
	// 		alert("I'm a " + this.getType() + ",my name is " + this.getName() + ", I'm " + this._getAge());
	// 	},
	// 	act : function(){
	// 		this._move();
	// 	}
	// };
	// var myDog = new Animal("wangcai");
	// myDog.say();
	// myDog.setName("abc");
	// alert(myDog.getName());
	// myDog.setName("xiaoqiang");
	// alert(myDog.getName());
	// myDog.setType("dog");



	// var myDog = new Animal("wangcai");
	// var myCat = new Animal("lili");
	// myCat.constructor.prototype.saySomeThing = function(){
	// 	alert( "" + this.getName() + this.getType());
	// };
	// myCat.saySomeThing();
	// myDog.saySomeThing();


	// myCat.prototype.sayThing = function(){
	// 	alert(this.getType());	//undefined 实例化之后
	// };
	// myCat.sayThing();	//sayThing() is undefined;

	// myCat.constructor.saySome = function(){
	// 	alert(this.getName());
	// };
	// myCat.saySome();		////saySome() is undefined;


	/********************************/
	//P234
	/********************************/
	// function Animal(name){
	// 	var name = name;
	// 	var type = "animal";
	// 	var _age = 20;
	// 	//添加master属性, 默认值为adang
	// 	var master = "adang";
	// 	this.getName = function(){
	// 		return name;
	// 	};
	// 	this.setName = function(o){
	// 		if(o != "wangcai" && o != "xiaoqiang"){
	// 			alert("您设置的name值不合要求");
	// 			return;
	// 		};
	// 		name = o;
	// 		//触发name属性的valueChange事件
	// 		this._valueChangeHandler("name");
	// 	};
	// 	//master属性的获取方法
	// 	this.getMaster = function(){
	// 		return master;
	// 	};
	// 	//master属性的设置方法
	// 	this.setMaster = function(o){
	// 		master = o;
	// 		//触发master属性的valueChange事件;
	// 		this._valueChangeHandler("master");
	// 	};
	// 	this.getType = function(){
	// 		return type;
	// 	};
	// 	this.setType = function(o){
	// 		alert("赋值失败，Animal类的type属性是只读属性");
	// 	};
	// 	this._getAge = function(){
	// 		return _age;
	// 	};
	// 	this._setAge = function(){
	// 		_age = o;
	// 	}
	// };
	// Animal.prototype = {
	// 	_move : function(){
	// 		alert("I'm moving now !");
	// 	},
	// 	say : function(){
	// 		alert("I'm a " + this.getType() + ", my name is " + this.getName() + ", I'm " + this._getAge());
	// 	},
	// 	act : function(){
	// 		this._move();
	// 	},
	// 	//公有行为，用于注册属性的valueChange事件
	// 	onChange : function(valueName, fun){
	// 		this["_"+valueName+"ChangeHandlers"] = this["_"+valueName+"ChangeHandlers"] || [];
	// 		this["_"+valueName+"ChangeHandlers"].push(fun);
	// 	},
	// 	//私有行为，属性valueChange的处理函数
	// 	_valueChangeHandler : function(valueName){
	// 		var o = this["_"+valueName+"ChangeHandlers"];
	// 		if(o){
	// 			for(var i = 0, n = o.length; i < n; i++){
	// 				var methodName = "get"+valueName.charAt(0).toUpperCase()+valueName.slice(1);
	// 				//what is this ?
	// 				// console.log(o[i]);
	// 				o[i](this[methodName]());
	// 			}
	// 		}
	// 	}
	// };

	// var myDog = new Animal("wangcai");
	// //给myDog注册name属性的valueChange事件
	// myDog.onChange("name",function(o){
	// 	//回调函数接受新的value值作为参数，可以对其进行匹配
	// 	if(o == "xiaoqiang"){
	// 		alert(1);
	// 	}else{
	// 		alert(2);
	// 	}
	// });
	// //给myDog换个新名字xiaoqiang;
	// myDog.setName("xiaoqiang");
	// //给myDog再注册一个name属性的valueChange事件
	// myDog.onChange("name",function(o){
	// 	alert("my new name is "+ o);
	// });
	// //给myDog换个新名字“wangcai”
	// myDog.setName("wangcai");
	// //给myDog注册master属性的valueChange事件
	// myDog.onChange("master",function(o){
	// 	alert("my new master is " + o);
	// });
	// //给myDog换个master
	// myDog.setMaster("licai");

	// var myDog2 = new Animal("xiaoqiang");
	// //给myDog2注册master属性的valueChange事件
	// myDog2.onChange("master",function(o){
	// 	alert(o + "is my new master");
	// });
	// myDog2.setMaster("zhou yubo");


	/********************************/
	//P236 5-126 添加fly行为
	/********************************/
	// function Animal(name){
	// 	this.name = name;
	// 	this.type = "animal";
	// };
	// Animal.prototype = {
	// 	say : function(){
	// 		alert("I'm a" + this.type + ", my name is " + this.name);
	// 	},
	// 	fly : function(){
	// 		alert(56743);
	// 	}
	// };

	// function Bird(name){
	// 	Animal.call(this,name);
	// };
	// Bird.prototype = Animal.prototype;
	// Bird.prototype.fly = function(){
	// 	alert("I'm flying !");
	// };
	// var myBird = new Bird("xiaocui");
	// myBird.say();	//I'm a animal, my name is xiaocui
	// myBird.fly();	//I'm flying
	// var myDog = new Animal("wangcai");
	// console.log(myDog.name);
	// myDog.constructor.prototype.fly = function(){
	// 	alert(12);
	// }
	// var myDog2 = new Animal("wangcaiAAAA");
	// console.log(myDog2.name);
	// myDog2.fly();
	// myDog.fly();	//I'm flying


	// 5-128 关于传值与传址
	// var a = [1,2,3], b = {name:"adang", sex: "male", age: 30};
	// var c = [], d = {};
	// for(var p in a){
	// 	c[p] = a[p];
	// };
	// for(var p in b){
	// 	d[p] = b[p]
	// };
	// c.push("4");
	// alert(a);
	// alert(c);
	// b.mail = "contact@mail.com";
	// alert(b.mail);
	// alert(d.mail);

	// 5-129 数组传值的简单方法
	// var e = [1, 2, 3];
	// var f = e.slice(), g = e.concat();
	// f.pop();
	// g.push(4);
	// alert(e);
	// alert(f);
	// alert(g);


	//P243 5-130 改进原型继承
	//defined Animal Class
	// function Animal(name){
	// 	this.name = name;
	// 	this.type = "animal";
	// };
	// Animal.prototype = {
	// 	say : function(){
	// 		alert("I'm a "+ this.type + " my name is "+ this.name);
	// 	}
	// };
	// //defined Bird Class
	// function Bird(name){
	// 	Animal.call(this,name);
	// };
	// Bird.prototype = new Animal();
	// Bird.prototype.constructor = Bird;
	// Bird.prototype.fly = function(){
	// 	alert("I'm flying!");
	// };
	// //Instantiation  实例化
	// var myBird = new Bird("xiaocui");
	// myBird.say();
	// myBird.fly();
	// var myDog = new Animal("wangcai");
	// myDog.fly();


	//P244 5-131
	//defined extend function
	// function extend(subClass, superClass){
	// 	var F = function(){};
	// 	F.prototype = superClass.prototype;
	// 	subClass.prototype = new F();
	// 	subClass.prototype.constructor = subClass;
	// 	subClass.superClass = superClass.prototype; // for superClass.apply(this, arguments);
	// 	if(superClass.prototype.constructor == Object.prototype.constructor){
	// 		superClass.prototype.constructor = superClass;
	// 	}
	// }

	// function Animal(name){
	// 	this.name = name;
	// 	this.type = "animal";
	// };
	// Animal.prototype = {
	// 	say : function(){
	// 		alert("I'm a "+ this.type + ", my name is "+ this.name);
	// 	}
	// };
	// function Bird(name){
	// 	this.constructor.superClass.constructor.apply(this,arguments);
	// 	//why not "this.superClass.constructor.apply(this,arguments);"
	// 	//because "this" is point to the Instantiation Object;
	// 	//"this.contructor" is point to Constructed Function;
	// 	this.type = "bird";
	// }
	// extend(Bird, Animal);
	// Bird.prototype.fly = function(){
	// 	alert("I'm flying");
	// };
	// var canary = new Bird("xiaocui");
	// canary.say();
	// canary.fly();
	// var wangcai = new Animal("wangcai");
	// wangcai.say();
	// wangcai.fly();


	//P247 5-134 面向对象方式重写电话本程序
	//定义电话本管理类
	// function PhonebookManager(o){
	// 	this._phonebook = o;
	// };
	// PhonebookManager.prototype = {
	// 	//查询记录
	// 	getTel : function(oName){
	// 		var tel = "";
	// 		for(var i = 0; i < this._phonebook.length; i++){
	// 			if(this._phonebook[i].name == oName){
	// 				tel = this._phonebook[i].tel;
	// 				break;
	// 			}
	// 		};
	// 		if(tel != ""){
	// 			return tel;
	// 		}else{
	// 			var str = oName + "'s tel is not defined";
	// 			return str;
	// 		}
	// 	},
	// 	//添加记录
	// 	addItem : function(oName, oTel){
	// 		this._phonebook.push({name: oName, tel: oTel});
	// 	},
	// 	removeItem : function(oName){
	// 		var n;
	// 		for(var i = 0; i< this._phonebook.length; i++){
	// 			if(this._phonebook[i].name == oName){
	// 				n = i;
	// 				break;
	// 			}
	// 		};
	// 		if(n != undefined){
	// 			this._phonebook.splice(n,1);
	// 		};
	// 	}
	// };

	// //实例化
	// var myPhonebook1 = [
	// 	{name: "adang", tel: "1234567"},
	// 	{name: "wangcai", tel: "123134567"},
	// 	{name: "xiaoxui", tel: "790427"},
	// 	{name: "fetch", tel: "758203029"},
	// 	{name: "lili", tel: "5734901"}
	// ];
	// var myPhonebook2 = [
	// 	{name: "jdong", tel: "54901321432"},
	// 	{name: "shuangxi", tel: "fdsawedsa"},
	// 	{name: "gudu", tel: "54901324325232432"},
	// 	{name: "lenove", tel: "5490432"},
	// 	{name: "G480", tel: "fdsajpe239"}
	// ]
	// var myPhonebookManager1 = new PhonebookManager(myPhonebook1),
	// 	myPhonebookManager2 = new PhonebookManager(myPhonebook2);

	// var adangTel = myPhonebookManager1.getTel("adang");
	// alert(adangTel);

	// myPhonebookManager1.addItem("lwei","56738278");
	// alert(myPhonebookManager1.getTel("lwei"));


	// alert(myPhonebookManager2.getTel("jdong"));
	// myPhonebookManager2.removeItem("jdong");
	// alert(myPhonebookManager2.getTel("jdong"));


	//P249 5-136 用面向对象方式重构Tab
	// var GLOBAL = {};
	// GLOBAL.namespace = function(str){
	// 	var arr = str.split("."), o = GLOBAL;
	// 	for(var i = arr[0] == "GLOBAL" ? 1 : 0; i < arr.length; i++){
	// 		o[arr[i]] = o[arr[i]] || {};
	// 		o = o[arr[i]];
	// 	}
	// };
	// GLOBAL.namespace("DOM");
	// GLOBAL.DOM.getElementsByClassName = function(str, root, tag){
	// 	if(root){
	// 		root = typeof root == "string" ? document.getElementById(root) : root;
	// 	}else{
	// 		root = document.body;
	// 	};
	// 	tag = tag || "*";
	// 	var els = root.getElementsByTagName(tag); arr = [];
	// 	for(var i = 0; i < els.length; i++){
	// 		for(var j = 0; k = els[i].className.split(" "); j < k.length; j++){
	// 			if(k[j] == str){
	// 				arr.push(els[i]);
	// 				break;
	// 			};
	// 		}
	// 	}
	// 	return arr;
	// };
	// GLOBAL.DOM.addClass = function(node, str){
	// 	if(!new RegExp("(^|\\s+)"+str).test(node.className){
	// 		node.className = node.className + " " + str;
	// 	};
	// };
	// GLOBAL.DOM.removeClass = function(node, str){
	// 	node.className = node.className.replace(new RegExp("(^|\\s+)"+str),"");
	// };
	// GLOBAL.namespace("Event");
	// GLOBAL.Event.on = function(node, eventType, handler, scope){
	// 	node = typeof node == "string" ? document.getElementById(node) : node;
	// 	scope = scope || node;	//scope参数，用于设置handler中的this指正指向，默认指向node节点
	// 	if(document.all){
	// 		node.attachEvent("on"+eventType, function(){
	// 			handler.apply(scope, arguments);
	// 		});
	// 	}else{
	// 		node.addEventListener(eventType, function(){
	// 			handler.apply(scope, arguments)
	// 		}, false);
	// 	};
	// };
	// function Tab (config){
	// 	this._root = config.root;
	// 	this._currentClass = config.currentClass;
	// 	var trigger = config.trigger || "click";
	// 	this._handler = config.handler;
	// 	var autoPlay = config.autoPlay;
	// 	var playTime = config.playTime || 3000;
	// 	this._tabMenus = GLOBAL.DOM.getElementsByClassName("J_tab-menu", this._root);
	// 	this._tabContents = GLOBAL.DOM.getElementsByClassName("J_tab-content", this._root);
	// 	this.currentIndex = 0;
	// 	var This = this;
	// 	if(autoPlay){
	// 		setInterval(function(){
	// 			This._autoHandler();	//*************
	// 		},playTime);
	// 	};
	// 	for(var i = 0; i < this._tabMenus.length; i++){
	// 		this._tabMenus[i]._index = i;
	// 		GLOBAL.Event.on(this._tabMenus[i], trigger, function(){
	// 			This.showItem(this._index);
	// 			this.currentIndex = this._index;
	// 		});
	// 	};
	// }
	// Tab.prototype = {
	// 	showItem : function(n){
	// 		for(var i = 0; i < this._tabContents.length; i++){
	// 			this._tabContents[i].style.display = "none";
	// 		};
	// 		this._tabContents[n].style.display = "block";
	// 		if(this._currentClass){
	// 			var currentMenu = GLOBAL.DOM.getElementsByClassName(this._currentClass, this._root)[0];
	// 			if(currentMenu){
	// 				GLOBAL.DOM.removeClass(currentMenu, this._currentClass);
	// 			};
	// 			GLOBAL.DOM.addClass(this._tabMenus[n], this._currentClass);
	// 		};
	// 		if(this._handler){
	// 			this._handler(n);
	// 		};
	// 	},
	// 	_autoHandler : function(){
	// 		this.currentIndex++;
	// 		if(this.currentIndex >= this._tabMenus.length){
	// 			this.currentIndex = 0;
	// 		};
	// 		this.showItem(this.currentIndex);
	// 	}
	// };
	// var tabs = GLOBAL.DOM.getElementsByClassName("J_tab");
	// new Tab({
	// 	root : tabs[0], trigger : "mouseover"
	// });
	// new Tab({
	// 	root : tabs[1], currentClass : "tabcurrentMenu", autoPlay : true, playTime : 5000
	// });
	// new Tab({
	// 	root : tabs[2], currentClass : "tabcurrentMenu2", trigger : "mouseover", hanler : function(index){
	// 		alert("您激活的是第"+(index+1)+"个标签");
	// 	}
	// });
	//
	//P251 5-137   调用内置类
	// var a = new String("hello world");
	// var b = "hello world";
	// alert(a.length);	//11
	// alert(b.length);	//1
	// var c = new Array(1,2,3);
	// var d = [1,2,3];
	// c.push(4);
	// d.pop();
	// alert(c);	//[1,2,3,4]
	// alert(d);	//[1,2]

	//P252 5-138	扩展内置类的行为
	Array.prototype.each = function(fun){
		for(var i = 0; i < this.length; i++){
			fun(this[i],i);
		}
	};
	Array.prototype.clone = function(){
		var o = [];
		this.each(function(v,k){
			o[k] = v;
		});
		return o;
	};
	Array.prototype.map = function(fun){
		var o = [];
		this.each(function(v,k){
			o[k] = fun(v,k);
		});
		return o;
	};
	Array.prototype.Delete = function(a){
		var o = this.clone();
		for(var i = o.length; i > 0; i-- ){
			if(o[i] == a){
				o.splice(i,1);
			}
		}
		return o;
	};
	
	/********************************/
	</script>
</head>
<body>
	
</body>
</html>